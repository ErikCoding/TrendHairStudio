<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Panel Admina - Trend Hair Studio</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <h1>Panel Administratora</h1>
            <p class="subtitle">Trend Hair Studio</p>
            
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="username">Nazwa u≈ºytkownika</label>
                    <input type="text" id="username" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Has≈Ço</label>
                    <input type="password" id="password" required>
                </div>
                
                <button type="submit" class="btn btn-primary">Zaloguj siƒô</button>
                
                <!-- Updated login hint to show multiple user types -->
                <p class="login-hint">Mened≈ºer: admin / admin123<br>Pracownik: pracownik / pracownik123</p>
            </form>
            
            <a href="index.html" class="back-link">‚Üê Powr√≥t do strony g≈Ç√≥wnej</a>
        </div>
    </div>

    <div id="adminDashboard" class="admin-dashboard" style="display: none;">
        <header class="admin-header">
            <div class="header-content">
                <div class="admin-logo">
                    <img src="THS-logo.jpg" alt="Trend Hair Studio" class="logo-img">
                </div>
                <div class="header-actions">
                    <div class="notification-bell" id="notificationBell">
                        <span class="bell-icon">üîî</span>
                        <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                    </div>
                    <!-- Added user role display -->
                    <span class="admin-name" id="adminName">Administrator</span>
                    <button id="logoutBtn" class="btn btn-secondary">Wyloguj</button>
                </div>
            </div>
        </header>

        <nav class="admin-nav">
            <button class="tab-btn active" data-tab="bookings">Rezerwacje</button>
            <button class="tab-btn" data-tab="blocked">Zablokowane daty</button>
            <!-- Added employee schedule tab (manager only) -->
            <button class="tab-btn" data-tab="employee-schedule" id="employeeScheduleTab" style="display: none;">Grafik pracownik√≥w</button>
            <button class="tab-btn" data-tab="messages">Wiadomo≈õci</button>
            <button class="tab-btn" data-tab="stats">Statystyki</button>
        </nav>

        <main class="admin-content">
            <div id="bookingsTab" class="tab-content active">
                <!-- Added manual booking button -->
                <div class="tab-header-actions">
                    <button id="addManualBookingBtn" class="btn btn-primary">+ Dodaj wizytƒô</button>
                </div>
                
                <div class="filter-controls">
                    <input type="date" id="filterDate" placeholder="Filtruj po dacie">
                    <select id="filterStylist">
                        <option value="">Wszyscy fryzjerzy</option>
                        <option value="Anna Kowalska">Anna Kowalska</option>
                        <option value="Maria Nowak">Maria Nowak</option>
                    </select>
                    <select id="filterService">
                        <option value="">Wszystkie us≈Çugi</option>
                        <option value="Strzy≈ºenie damskie">Strzy≈ºenie damskie</option>
                        <option value="Strzy≈ºenie mƒôskie">Strzy≈ºenie mƒôskie</option>
                        <option value="Koloryzacja">Koloryzacja</option>
                        <option value="Pasemka">Pasemka</option>
                        <option value="Stylizacja">Stylizacja</option>
                        <option value="Pielƒôgnacja">Pielƒôgnacja</option>
                        <option value="Upiƒôcie">Upiƒôcie</option>
                    </select>
                </div>
                
                <div id="bookingsList" class="bookings-list"></div>
            </div>

            <div id="blockedTab" class="tab-content">
                <!-- Block button only visible for managers -->
                <div class="tab-header-actions" id="blockDateActions">
                    <button id="addBlockBtn" class="btn btn-primary">+ Zablokuj datƒô</button>
                </div>
                
                <div class="block-form" id="blockForm" style="display: none;">
                    <h3>Dodaj zablokowanƒÖ datƒô</h3>
                    <form id="blockDateForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="blockStartDate">Data od</label>
                                <input type="date" id="blockStartDate" required>
                            </div>
                            <div class="form-group">
                                <label for="blockEndDate">Data do</label>
                                <input type="date" id="blockEndDate" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="blockReason">Pow√≥d (opcjonalnie)</label>
                            <input type="text" id="blockReason" placeholder="np. Wakacje, ≈öwiƒôta">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Zablokuj</button>
                            <button type="button" id="cancelBlockBtn" class="btn btn-secondary">Anuluj</button>
                        </div>
                    </form>
                </div>
                
                <div id="blockedDatesList" class="blocked-dates-list"></div>
            </div>

            <!-- Added employee schedule tab -->
            <div id="employee-scheduleTab" class="tab-content">
                <div class="tab-header-actions">
                    <button id="addEmployeeBlockBtn" class="btn btn-primary">+ Zablokuj dni dla pracownika</button>
                </div>
                
                <div class="block-form" id="employeeBlockForm" style="display: none;">
                    <h3>Zablokuj dni dla pracownika</h3>
                    <form id="employeeBlockDateForm">
                        <div class="form-group">
                            <label for="blockEmployee">Pracownik</label>
                            <select id="blockEmployee" required>
                                <option value="">Wybierz pracownika</option>
                                <option value="Anna Kowalska">Anna Kowalska</option>
                                <option value="Maria Nowak">Maria Nowak</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="empBlockStartDate">Data od</label>
                                <input type="date" id="empBlockStartDate" required>
                            </div>
                            <div class="form-group">
                                <label for="empBlockEndDate">Data do</label>
                                <input type="date" id="empBlockEndDate" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="empBlockReason">Pow√≥d (opcjonalnie)</label>
                            <input type="text" id="empBlockReason" placeholder="np. Urlop, Choroba">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Zablokuj</button>
                            <button type="button" id="cancelEmployeeBlockBtn" class="btn btn-secondary">Anuluj</button>
                        </div>
                    </form>
                </div>
                
                <div id="employeeBlockedDatesList" class="blocked-dates-list"></div>
            </div>

            <div id="messagesTab" class="tab-content">
                <div class="filter-controls">
                    <select id="filterMessageStatus">
                        <option value="">Wszystkie wiadomo≈õci</option>
                        <option value="unread">Nieprzeczytane</option>
                        <option value="read">Przeczytane</option>
                    </select>
                </div>
                
                <div id="messagesList" class="messages-list"></div>
            </div>

            <div id="statsTab" class="tab-content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Wszystkie rezerwacje</h3>
                        <p class="stat-number" id="totalBookings">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Dzisiejsze wizyty</h3>
                        <p class="stat-number" id="todayBookings">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>NadchodzƒÖce wizyty</h3>
                        <p class="stat-number" id="upcomingBookings">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Najpopularniejsza us≈Çuga</h3>
                        <p class="stat-text" id="popularService">-</p>
                    </div>
                </div>
                
                <div class="services-breakdown">
                    <h3>Rozk≈Çad us≈Çug</h3>
                    <div id="servicesChart" class="services-chart"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Added manual booking modal -->
    <div id="manualBookingModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeManualBookingModal">&times;</span>
            <h2>Dodaj wizytƒô</h2>
            <form id="manualBookingForm">
                <div class="form-group">
                    <label for="manualClientName">Imiƒô i nazwisko *</label>
                    <input type="text" id="manualClientName" required>
                </div>
                <div class="form-group">
                    <label for="manualClientPhone">Telefon *</label>
                    <input type="tel" id="manualClientPhone" required>
                </div>
                <div class="form-group">
                    <label for="manualClientEmail">Email</label>
                    <input type="email" id="manualClientEmail">
                </div>
                <div class="form-group">
                    <label for="manualService">Us≈Çuga *</label>
                    <select id="manualService" required>
                        <option value="">Wybierz us≈Çugƒô</option>
                        <option value="Strzy≈ºenie damskie">Strzy≈ºenie damskie</option>
                        <option value="Strzy≈ºenie mƒôskie">Strzy≈ºenie mƒôskie</option>
                        <option value="Koloryzacja">Koloryzacja</option>
                        <option value="Pasemka">Pasemka</option>
                        <option value="Stylizacja">Stylizacja</option>
                        <option value="Pielƒôgnacja">Pielƒôgnacja</option>
                        <option value="Upiƒôcie">Upiƒôcie</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="manualStylist">Fryzjer *</label>
                    <select id="manualStylist" required>
                        <option value="">Wybierz fryzjera</option>
                        <option value="Anna Kowalska">Anna Kowalska</option>
                        <option value="Maria Nowak">Maria Nowak</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="manualDate">Data *</label>
                    <input type="date" id="manualDate" required>
                </div>
                <div class="form-group">
                    <label for="manualTime">Godzina *</label>
                    <select id="manualTime" required>
                        <option value="">Wybierz godzinƒô</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="manualNotes">Uwagi</label>
                    <textarea id="manualNotes" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Dodaj wizytƒô</button>
                    <button type="button" class="btn btn-secondary" id="cancelManualBookingBtn">Anuluj</button>
                </div>
            </form>
        </div>
    </div>

    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeEditModal">&times;</span>
            <h2>Edytuj rezerwacjƒô</h2>
            <form id="editBookingForm">
                <input type="hidden" id="editBookingId">
                <input type="hidden" id="editBookingStylist">
                <div class="form-group">
                    <label for="editDate">Data</label>
                    <input type="date" id="editDate" required>
                </div>
                <div class="form-group">
                    <label for="editTime">Godzina</label>
                    <select id="editTime" required>
                        <option value="">Wybierz godzinƒô</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Zapisz zmiany</button>
                    <button type="button" class="btn btn-secondary" id="cancelEditBtn">Anuluj</button>
                </div>
            </form>
        </div>
    </div>

    <div id="confirmModal" class="modal">
        <div class="modal-content">
            <h2>Potwierdzenie</h2>
            <p id="confirmMessage"></p>
            <div class="form-actions">
                <button id="confirmYes" class="btn btn-primary">Tak</button>
                <button id="confirmNo" class="btn btn-secondary">Nie</button>
            </div>
        </div>
    </div>

    <div id="messageModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeMessageModal">&times;</span>
            <h2>Szczeg√≥≈Çy wiadomo≈õci</h2>
            <div id="messageDetails"></div>
            <div class="form-actions">
                <button id="markAsReadBtn" class="btn btn-primary">Oznacz jako przeczytane</button>
                <button id="deleteMessageBtn" class="btn btn-danger">Usu≈Ñ wiadomo≈õƒá</button>
            </div>
        </div>
    </div>

    <script type="module" src="admin-script.js"></script>
</body>
</html>
